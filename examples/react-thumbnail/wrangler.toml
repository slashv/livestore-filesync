name = "livestore-filesync-react-thumbnail-example"
compatibility_date = "2024-12-01"
compatibility_flags = ["nodejs_compat"]

main = "src/cf-worker/index.r2.ts"
# main = "src/cf-worker/index.s3.ts"

# R2 bucket for file storage
# Comment out this section when using S3 Signer mode
[[r2_buckets]]
binding = "FILE_BUCKET"
bucket_name = "livestore-filesync-dev"

# Durable Object for LiveStore sync
[[durable_objects.bindings]]
name = "SYNC_BACKEND_DO"
class_name = "SyncBackendDO"

[[migrations]]
tag = "v1"
new_sqlite_classes = ["SyncBackendDO"]

# WORKER_AUTH_TOKEN is set via .dev.vars for local dev
# For production, use `wrangler secret put WORKER_AUTH_TOKEN`
