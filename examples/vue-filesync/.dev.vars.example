# Cloudflare Worker secrets (used by wrangler dev)
# Copy this file to .dev.vars and set your own values

# Auth token for the signer API and LiveStore sync (required for both modes)
WORKER_AUTH_TOKEN=dev-token-change-in-production

# =============================================================================
# Two worker modes available (see wrangler.toml to switch):
# =============================================================================
#
# 1. R2 Gateway mode (default) - src/cf-worker/index.r2.ts
#    - Worker handles LiveStore sync + file storage via R2 binding
#    - Files proxied through Worker
#    - Only needs WORKER_AUTH_TOKEN above
#
# 2. S3 Signer mode - src/cf-worker/index.s3.ts
#    - Worker handles LiveStore sync + S3 URL signing
#    - Files uploaded directly to R2 (not proxied through Worker)
#    - Requires S3_* variables below + CORS configuration on R2 bucket
#
# =============================================================================
# S3 Signer Configuration (required for S3 Signer mode)
# =============================================================================
# Uncomment these when using index.s3.ts
#
# Step 1: Get S3 API credentials for Cloudflare R2
#   1. Go to Cloudflare Dashboard > R2 > Manage R2 API Tokens
#   2. Create a token with read/write permissions for your bucket
#   3. Copy the Access Key ID and Secret Access Key
#   4. Your S3 endpoint is: https://<account-id>.r2.cloudflarestorage.com
#
# Step 2: Configure CORS on your R2 bucket (REQUIRED for browser uploads)
#   Option A - Via CLI:
#     wrangler r2 bucket cors set <bucket-name> --file ./r2-cors.json
#
#   Option B - Via Dashboard:
#     1. Go to Cloudflare Dashboard > R2 > your bucket > Settings
#     2. Scroll to "CORS Policy" and click "Add CORS policy"
#     3. Add the rules from r2-cors.json in this directory
#
# S3_ENDPOINT=https://<account-id>.r2.cloudflarestorage.com
# S3_REGION=auto
# S3_BUCKET=livestore-filesync-dev
# S3_ACCESS_KEY_ID=your-access-key-id
# S3_SECRET_ACCESS_KEY=your-secret-access-key
